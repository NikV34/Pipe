{% load static %}
<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Теплотехнический расчет</title>

    <!-- Bootstrap -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/style.css' %}" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
        <h1>Геометрические характеристики дымовой трубы</h1>
        <form method="post">{% csrf_token %}
            <div class="main-field__wrapper form-inline">
                <div class="form-group">
                    <label for="{{ form.sector.id_for_label }}">Номер участка снизу:</label>
                    <input class="form-control" type="number" min="0" step="1" title="Максимум 10 участков" value="{{ colomns }}" name="{{ form.sector.name }}"
                           id="main_{{ form.sector.name }}">
                </div>
                <div class="form-group">
                    <label for="{{ form.bottom_mark.id_for_label }}">Отметка низа участка, м:</label>
                    <input class="form-control" type="number" min="0" step="0.01" value="0" name="{{ form.bottom_mark.name }}"
                           id="main_{{ form.bottom_mark.name }}">
                </div>
            </div>

            <div class="form-group form-inline">
                <input type="checkbox" checked disabled id="skeleton" data-toggle="collapse" data-target="#collapseSkeleton" aria-expanded="false" aria-controls="collapseSkeleton">
                <label for="skeleton">Несущий ствол</label>
            </div>
            <div class="row detail-field__wrapper skeleton collapse in" id="collapseSkeleton">
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="{{ form.skeleton_thickness.id_for_label }}">Толщина, мм:</label>
                        <input class="form-control" type="number" min="0" step="1" value="0" name="{{ form.skeleton_thickness.name }}"
                               id="id_{{ form.skeleton_thickness.name }}">
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="{{ form.skeleton_radius_outer.id_for_label }}">Наружный радиус, мм:</label>
                        <input class="form-control" type="number" min="0" step="1" value="0" name="{{ form.skeleton_radius_outer.name }}"
                               id="id_{{ form.skeleton_radius_outer.name }}">
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="{{ form.skeleton_radius_inner.id_for_label }}">Внутренний радиус, мм:</label>
                        <input class="form-control" type="number" min="0" step="1" value="0" name="{{ form.skeleton_radius_inner.name }}"
                               id="id_{{ form.skeleton_radius_inner.name }}">
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="{{ form.skeleton_transcalency.id_for_label }}">Теплопроводность, Вт/(м-°С):</label>
                        <input class="form-control" type="number" min="0" step="0.01" value="0" name="{{ form.skeleton_transcalency.name }}"
                               id="{{ form.skeleton_transcalency.name }}">
                    </div>
                </div>
            </div>

            <div class="form-group form-inline">
                <input type="checkbox" id="clamp" data-toggle="collapse" data-target="#collapseClamp" aria-expanded="false" aria-controls="collapseClamp">
                <label for="clamp">Прижимная футеровка</label>
            </div>
            <div class="row detail-field__wrapper clamp collapse" id="collapseClamp">
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="{{ form.clamp_lining_thickness.id_for_label }}">Толщина, мм:</label>
                        <input class="form-control" type="number" min="0" step="1" value="0" name="{{ form.clamp_lining_thickness.name }}"
                               id="id_{{ form.clamp_lining_thickness.name }}">
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="{{ form.clamp_lining_radius_outer.id_for_label }}">Наружный радиус, мм:</label>
                        <input class="form-control" type="number" min="0" step="1" value="0" name="{{ form.clamp_lining_radius_outer.name }}"
                               id="id_{{ form.clamp_lining_radius_outer.name }}">
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="{{ form.clamp_lining_radius_inner.id_for_label }}">Внутренний радиус, мм:</label>
                        <input class="form-control" type="number" min="0" step="1" value="0" name="{{ form.clamp_lining_radius_inner.name }}"
                               id="id_{{ form.clamp_lining_radius_inner.name }}">
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="{{ form.clamp_lining_transcalency.id_for_label }}">Теплопроводность, Вт/(м-°С):</label>
                        <input class="form-control" type="number" min="0" step="0.01" value="0" name="{{ form.clamp_lining_transcalency.name }}"
                               id="{{ form.clamp_lining_transcalency.name }}">
                    </div>
                </div>
            </div>

            <div class="form-group form-inline">
                <input type="checkbox" id="air" data-toggle="collapse" data-target="#collapseAir" aria-expanded="false" aria-controls="collapseAir">
                <label for="air">Воздушный зазор</label>
            </div>
            <div class="row detail-field__wrapper air collapse" id="collapseAir">
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="{{ form.air_thickness.id_for_label }}">Толщина, мм:</label>
                        <input class="form-control" type="number" min="0" step="1" value="0" name="{{ form.air_thickness.name }}"
                               id="id_{{ form.air_thickness.name }}">
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="{{ form.air_radius_outer.id_for_label }}">Наружный радиус, мм:</label>
                        <input class="form-control" type="number" min="0" step="1" value="0" name="{{ form.air_radius_outer.name }}"
                               id="id_{{ form.air_radius_outer.name }}">
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="{{ form.air_radius_inner.id_for_label }}">Внутренний радиус, мм:</label>
                        <input class="form-control" type="number" min="0" step="1" value="0" name="{{ form.air_radius_inner.name }}"
                               id="id_{{ form.air_radius_inner.name }}">
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="{{ form.air_transcalency.id_for_label }}">Теплопроводность, Вт/(м-°С):</label>
                        <input class="form-control" type="number" min="0" step="0.01" value="0" name="{{ form.air_transcalency.name }}"
                               id="{{ form.air_transcalency.name }}">
                    </div>
                </div>
            </div>
            
            <div class="form-group form-inline">
                <input type="checkbox" id="insulation" data-toggle="collapse" data-target="#collapseInsulation" aria-expanded="false" aria-controls="collapseInsulation">
                <label for="insulation">Теплоизоляция</label>
            </div>
            <div class="row detail-field__wrapper insulation collapse" id="collapseInsulation">
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="{{ form.insulation_thickness.id_for_label }}">Толщина, мм:</label>
                        <input class="form-control" type="number" min="0" step="1" value="0" name="{{ form.insulation_thickness.name }}"
                               id="id_{{ form.insulation_thickness.name }}">
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="{{ form.insulation_radius_outer.id_for_label }}">Наружный радиус, мм:</label>
                        <input class="form-control" type="number" min="0" step="1" value="0" name="{{ form.insulation_radius_outer.name }}"
                               id="id_{{ form.insulation_radius_outer.name }}">
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="{{ form.insulation_radius_inner.id_for_label }}">Внутренний радиус, мм:</label>
                        <input class="form-control" type="number" min="0" step="1" value="0" name="{{ form.insulation_radius_inner.name }}"
                               id="id_{{ form.insulation_radius_inner.name }}">
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="{{ form.insulation_transcalency.id_for_label }}">Теплопроводность, Вт/(м-°С):</label>
                        <input class="form-control" type="number" min="0" step="0.01" value="0" name="{{ form.insulation_transcalency.name }}"
                               id="{{ form.insulation_transcalency.name }}">
                    </div>
                </div>
            </div>
            
            <div class="form-group form-inline">
                <input type="checkbox" id="lining" data-toggle="collapse" data-target="#collapseLining" aria-expanded="false" aria-controls="collapseLining">
                <label for="lining">Футеровка</label>
            </div>
            <div class="row detail-field__wrapper lining collapse" id="collapseLining">
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="{{ form.lining_thickness.id_for_label }}">Толщина, мм:</label>
                        <input class="form-control" type="number" min="0" step="1" value="0" name="{{ form.lining_thickness.name }}"
                               id="id_{{ form.lining_thickness.name }}">
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="{{ form.lining_radius_outer.id_for_label }}">Наружный радиус, мм:</label>
                        <input class="form-control" type="number" min="0" step="1" value="0" name="{{ form.lining_radius_outer.name }}"
                               id="id_{{ form.lining_radius_outer.name }}">
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="{{ form.lining_radius_inner.id_for_label }}">Внутренний радиус, мм:</label>
                        <input class="form-control" type="number" min="0" step="1" value="0" name="{{ form.lining_radius_inner.name }}"
                               id="id_{{ form.lining_radius_inner.name }}">
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="{{ form.lining_transcalency.id_for_label }}">Теплопроводность, Вт/(м-°С):</label>
                        <input class="form-control" type="number" min="0" step="0.01" value="0" name="{{ form.lining_transcalency.name }}"
                               id="{{ form.lining_transcalency.name }}">
                    </div>
                </div>
            </div>
            <button type="submit" class="btn btn-primary">Сохранить</button>
            <a class="btn btn-primary" href="../input-data-thermal/{{ project_id }}">Далее</a>
        </form>
        <div class="row">
            <div class="col-md-2">
                {% for l in headline_list %}
                    <p>{{ l }}</p>
                {% endfor %}
            </div>
        {% for o in colomns_data %}
            <div class="col-md-1">
                {% for i in o %}
                    {% if i %}
                        <p>{{ i }}</p>
                    {% else %}
                        <p>0</p>
                    {% endif %}
                {% endfor %}
            </div>
        {% endfor %}
        </div>
    </div>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="{% static 'js/bootstrap.min.js' %}"></script>

    <script>
        var param = $("input[id*='id_']");
        function calculate_radius(numberInput) {
            if (numberInput%3===1) {
                {#console.log('first');#}
                param[numberInput + 1].value = parseInt(param[numberInput].value) -
                parseInt(param[numberInput - 1].value);
            } else if (numberInput%3===2) {
                {#console.log('second');#}
                param[numberInput].value = parseInt(param[numberInput - 1].value) -
                parseInt(param[numberInput - 2].value);
            } else if (numberInput%3===0) {
                {#console.log('third');#}
                param[numberInput - 3].value = parseInt(param[numberInput - 2].value) -
                parseInt(param[numberInput - 1].value);
            }
        };
        param.each(function(index) {
            param[index].onchange = function () {
                calculate_radius(index + 1)
            }
        });
        $("input[type='checkbox']").change(function() {
            if(!this.checked) {
                var pattern = this.id;
                var inputClear =  $("input[name*='" + pattern + "']");
                inputClear.each(function (index) {
                    inputClear[index].value = null;
                });
            }
        });
    </script>
  </body>
</html>